#!/usr/bin/env sh

confirm() {
	echo -n "$1 [y] ? "
	read CONFIRM
	if [ "$CONFIRM" = "y" ] || [ "$CONFIRM" = "Y" ] || [ "${CONFIRM}xxx" = "xxx" ]
	then
		echo "true"
	fi
}

echo "Normally, cached dependencies are stored in git."
STORE=$(confirm "Would you like to store your dependencies")
if [ "$CONFIRM" = "true" ] 
then
	mkdir -p vendor/cache
	git add vendor/cache
fi

[ -f ./.gitignore ] || touch ./.gitignore
grep -q "vendor/python" ./.gitignore
[ $? -eq 0 ] || echo "vendor/python" >> ./.gitignore
git add ./.gitignore

echo "Changes may have been made to your git project."
COMMIT=$(confirm "Would you like to commit them")
if [ "$CONFIRM" = "true" ]
then
	git commit -m "Storing cache and .gitignores (Automatically generated by SnakeGit)"
else
	echo "Ok, note that next time you commit, these changes will be included"
fi
